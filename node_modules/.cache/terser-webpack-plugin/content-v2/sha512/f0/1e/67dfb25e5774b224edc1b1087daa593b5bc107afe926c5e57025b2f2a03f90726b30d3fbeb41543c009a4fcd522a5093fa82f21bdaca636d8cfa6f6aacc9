{"code":"!function(t){var e={};function s(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)s.d(n,o,function(e){return t[e]}.bind(null,o));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,\"a\",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p=\"\",s(s.s=1)}([function(t,e){t.exports={shuffle:function(t){let e,s,n=t.length;for(;n;)s=Math.floor(Math.random()*n--),e=t[n],t[n]=t[s],t[s]=e;return t},distance:function(t,e){let s=(e.x-t.x)*(e.x-t.x),n=(e.y-t.y)*(e.y-t.y);return Math.sqrt(s+n)},swap:function(t,e,s){let n=t[e];return t[e]=t[s],t[s]=n,t}}},function(t,e,s){const n=s(2),o=s(4),r=document.querySelector(\"canvas\"),i=r.getContext(\"2d\");r.width=window.innerWidth,r.height=window.innerHeight,t.exports={canvas:r,context:i};let h=new o(r.width,r.height,10),a=new n(20,h);console.log(h.cities),a.evaluatePopulationFitness(),console.log(a.getAverageFitness());for(let t=0;t<1500;t++)a.evaluatePopulationFitness(),a.makeNextGeneration();console.log(a.getAverageFitness())},function(t,e,s){const n=s(3),{shuffle:o,distance:r}=s(0);t.exports=class{constructor(t,e){this.parentMap=e,this.chromosomes=this.generateInitialPopulation(t)}generateInitialPopulation(t){let e=[];for(let s=0;s<t;s++)e.push(new n(this.parentMap.cities));return e}sortByFitness(t,e){return t.fitness>e.fitness?-1:t.fitness<e.fitness?1:0}makeNextGeneration(){this.chromosomes.sort((function(t,e){return t.fitness>e.fitness?1:t.fitness<e.fitness?-1:0})),this.chromosomes.splice(Math.floor(this.chromosomes.length/2),Math.ceil(this.chromosomes.length/2));let t=this.chromosomes.length;for(let e=1;e<=t;e+=2)this.chromosomes.push(this.updateFitness(this.chromosomes[e].makeOffspring(this.chromosomes[e-1]))),this.chromosomes.push(this.updateFitness(this.chromosomes[e-1].makeOffspring(this.chromosomes[e])))}getAverageFitness(){let t=0;for(let e of this.chromosomes)t+=e.fitness;return t/this.chromosomes.length}updateFitness(t){let e=r(this.parentMap.startingCity,t.genes[0]);for(let s=0;s<t.genes.length-1;s++)e+=r(t.genes[s],t.genes[s+1]);return e+=r(this.parentMap.startingCity,t.genes[t.genes.length-1]),t.fitness=e,t}evaluatePopulationFitness(){for(let t=0;t<this.chromosomes.length;t++)this.updateFitness(this.chromosomes[t])}}},function(t,e,s){const{shuffle:n,swap:o,distance:r}=s(0);class i{constructor(t,e=!0){this.genes=e?this.getRandomGenes(t):t,this.fitness=0}getRandomGenes(t){let e=[];for(let s=0;s<t.length-1;s++)e[s]=t[s+1];return n(e)}makeOffspring(t,e=.2){const s=2+Math.floor(Math.random()*(this.genes.length-3)),n=Math.floor(Math.random()*(this.genes.length-s));let r=new Set,h=new i([],!1),a=0;for(let t=0;t<s;t++)r.add(this.genes[n+t]);for(;h.genes.length<this.genes.length;)h.genes.length===n&&r.forEach(t=>{h.genes.push(t)}),r.has(t.genes[a])?a++:(h.genes.push(t.genes[a]),a++);return Math.random()<=e&&o(h.genes,Math.floor(Math.random()*h.genes.length),Math.floor(Math.random()*h.genes.length)),h}}t.exports=i},function(t,e,s){const n=s(5),{shuffle:o,distance:r}=s(0),{canvas:i,context:h}=s(1);t.exports=class{constructor(t,e,s=0){this.width=t,this.height=e,this.cities=this.makeRandomMap(s),this.startingCity=this.cities[0]}makeRandomMap(t=this.cityCount){let e=[];for(let s=0;s<t;s++)e.push(new n(this.width,this.height));return e}draw(){h.beginPath(),this.cities.forEach(t=>{h.moveTo(t.x,t.y),h.arc(t.x-5,t.y-5,10,0,2*Math.PI,!1)}),h.stroke()}}},function(t,e){t.exports=class{constructor(t,e,s=!1){this.x=s?t:Math.floor(Math.random()*t),this.y=s?e:Math.floor(Math.random()*e)}}}]);","extractedComments":[]}